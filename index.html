<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
    <link rel="stylesheet" href="twittler.css">
  </head>
  <body>
    <script>

      $(document).ready(function(){
        var $body = $('body');
        $body.html('');
         var updateBtn = $('<button>Update</button>');
        updateBtn
          .attr('id','update')
          .appendTo($body);

        var $feed = $('<div></div>'); 
        $feed.attr('id','feed').appendTo($body);

        var updateFeed = function(){
        var arr = $('streams.home');
        var index = streams.home.length - 1;
        while(index >= 0){
          var tweet = streams.home[index];
          var $tweet = $('<div></div>');
          $tweet.addClass('tweet');

          var userName = $(tweet.user);

          var button = $('<button></button>');
          button.text('@' + tweet.user);
          button.addClass(tweet.user);
          button.addClass('button');

          $tweet.text(': ' + tweet.message + '[' + tweet.created_at +']');
         
          $tweet.appendTo($body);
          button.prependTo($tweet);
          index -= 1;
          $('.tweet').on('click','button',function(e){
            var targetName = $(this).text().slice(1);
            console.log($(this));
             $('.tweet').find($('.button')).not(`.${targetName}`).parent().hide();
            
        })
      }
        
      };
      updateFeed();
      updateBtn.on('click',function(event){
            event.preventDefault();
            updateFeed();
        });
      });

    </script>
  </body>
</html>
